<div dir="rtl">

# Lazy לעומת Eager Loading ב-JPA

## מבוא
- אחד האתגרים הגדולים ב-ORM: ניהול יעיל של טעינת נתונים מקושרים
- שתי אסטרטגיות עיקריות: Lazy Loading ו-Eager Loading
- ההחלטה משפיעה משמעותית על ביצועים ויעילות

## Lazy Loading (טעינה עצלה)

### עקרון פעולה
- ישויות מקושרות לא נטענות מיידית
- JPA יוצר "פרוקסי" - מחזיק מקום
- הנתונים נטענים רק בגישה בפועל

### יתרונות
- יעילות זיכרון - טוען רק נתונים נדרשים
- שאילתות מהירות יותר
- מתאים למודלים גדולים ומורכבים

### חסרונות
- LazyInitializationException - שגיאה נפוצה
- דורש תשומת לב בתצורה ותכנון

## Eager Loading (טעינה להוטה)

### עקרון פעולה
- כל הישויות המקושרות נטענות מיד
- טעינה אוטומטית עם האובייקט המקורי

### יתרונות
- נוח לשימוש - נתונים זמינים תמיד
- פחות קוד לניהול
- ביצועים טובים למודלים קטנים

### חסרונות
- עומס זיכרון גבוה
- שאילתות איטיות יותר
- לא מתאים למודלים גדולים

## ברירות מחדל ב-JPA

| סוג היחס     | ברירת מחדל | סיבה |
|--------------|-------------|------|
| OneToOne@    | EAGER | יחסים אלה בדרך כלל מכילים מידע משלים חיוני |
| ManyToOne@  | EAGER | לרוב נדרש האובייקט "הורה" כשמתייחסים לאובייקט "ילד" |
| OneToMany@  | LAZY | אוספים יכולים להיות גדולים ולא תמיד דרושים |
| ManyToMany@ | LAZY | אוספים עשויים להיות גדולים ולעיתים קרובות אינם הכרחיים מיידית |

## המלצות מעשיות

1. **השאר רוב היחסים כ-Lazy** - אסטרטגיה בטוחה למניעת בעיות ביצועים
2. **Eager רק ליחסים קטנים וחיוניים** - נתונים שתמיד נדרשים יחד
3. **טעינה ממוקדת** - JOIN FETCH או EntityGraphs לפי הצורך
4. **הימנע מגישה ל-Lazy מחוץ ל-transaction**
5. **בצע בדיקות ביצועים** - נטר שאילתות לזיהוי בעיות

## השפעות על המערכת
- צריכת זיכרון
- מספר שאילתות לבסיס הנתונים
- זמן תגובה
- מורכבות הקוד


- Lazy Loading כברירת מחדל
- טעינת נתונים נוספים רק לפי הצורך
- הבנת דפוסי גישה לנתונים היא המפתח

</div>